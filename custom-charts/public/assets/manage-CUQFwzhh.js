import{_ as e,a as t,f as n,n as r,p as i,r as a,s as o,t as s,u as c}from"./jsx-runtime-BxddEoRB.js";var l=e(n()),u=e(i()),d=e(s());a();function f(e){try{return e?new Date(e).toLocaleString():``}catch{return e||``}}function p(){let[e,n]=(0,u.useState)(``),[i,a]=(0,u.useState)([]),[s,l]=(0,u.useState)(``),[p,m]=(0,u.useState)(`updatedAt`);(0,u.useEffect)(()=>{a(t())},[]);let h=(0,u.useMemo)(()=>[...i].filter(t=>!e||(t.name||``).toLowerCase().includes(e.toLowerCase())).filter(e=>!s||e.chartType===s).sort((e,t)=>(t[p]||``).localeCompare(e[p]||``)),[i,e,s,p]);function g(e){if(!confirm(`确认删除该图表吗？`))return;let t=o(e);a(t)}function _(e){let n=prompt(`新标签`);if(!n)return;let i=c.load(r.CHARTS,[]),o=i.findIndex(t=>t.id===e.id);if(o>=0){let e=Array.from(new Set([...i[o].tags||[],n]));i[o]={...i[o],tags:e},c.save(r.CHARTS,i),a(t())}}function v(e){window.parent&&window.parent!==window?window.parent.postMessage({type:`OPEN_CUSTOM_CHARTS`,which:`editor`,chartId:e},`*`):window.location.href=`/editor.html?id=${e}`}return(0,d.jsxs)(`div`,{children:[(0,d.jsxs)(`div`,{className:`topbar`,children:[(0,d.jsx)(`button`,{className:`btn primary`,onClick:()=>{window.parent&&window.parent!==window?window.parent.postMessage({type:`OPEN_CUSTOM_CHARTS`,which:`editor`},`*`):window.location.href=`/editor.html`},children:`创建图表`}),(0,d.jsx)(`input`,{className:`search`,placeholder:`搜索图表名称…`,value:e,onChange:e=>n(e.target.value)}),(0,d.jsxs)(`select`,{className:`btn`,value:s,onChange:e=>l(e.target.value),children:[(0,d.jsx)(`option`,{value:``,children:`图表类型`}),[`table`,`bar`,`line`,`pie`,`scatter`,`heatmap`,`area`,`radar`].map(e=>(0,d.jsx)(`option`,{value:e,children:e},e))]}),(0,d.jsxs)(`select`,{className:`btn`,value:p,onChange:e=>m(e.target.value),children:[(0,d.jsx)(`option`,{value:`updatedAt`,children:`按修改时间`}),(0,d.jsx)(`option`,{value:`createdAt`,children:`按创建时间`})]})]}),(0,d.jsx)(`div`,{className:`grid`,children:h.map(e=>(0,d.jsxs)(`div`,{className:`card`,onClick:()=>v(e.id),children:[e.previewImage?(0,d.jsx)(`div`,{className:`preview`,children:(0,d.jsx)(`img`,{src:e.previewImage,alt:e.name||`chart preview`})}):(0,d.jsxs)(`div`,{className:`preview placeholder`,children:[(0,d.jsx)(`span`,{children:`📊`}),(0,d.jsx)(`span`,{style:{fontSize:14,marginTop:8},children:e.chartType||`chart`})]}),(0,d.jsxs)(`div`,{children:[(0,d.jsxs)(`div`,{className:`row`,style:{marginTop:4},children:[(0,d.jsx)(`strong`,{style:{fontSize:13},children:e.name||`(未命名)`}),(0,d.jsxs)(`div`,{children:[(0,d.jsx)(`button`,{className:`btn`,style:{padding:`4px 8px`,fontSize:12},onClick:t=>{t.stopPropagation(),v(e.id)},children:`修改`}),` `,(0,d.jsx)(`button`,{className:`btn`,style:{padding:`4px 8px`,fontSize:12},onClick:t=>{t.stopPropagation(),g(e.id)},children:`删除`})]})]}),(0,d.jsxs)(`div`,{className:`meta`,children:[e.chartType||`bar`,` · `,e.publishStatus||`draft`]}),(0,d.jsx)(`div`,{className:`meta`,children:f(e.updatedAt)}),(0,d.jsxs)(`div`,{className:`tags`,children:[(e.tags||[]).map(e=>(0,d.jsx)(`span`,{className:`tag`,children:e},e)),(0,d.jsx)(`button`,{className:`btn`,style:{padding:`2px 6px`,fontSize:11},onClick:t=>{t.stopPropagation(),_(e)},children:`+`})]})]})]},e.id))})]})}(0,l.createRoot)(document.getElementById(`root`)).render((0,d.jsx)(p,{}));
//# sourceMappingURL=manage-CUQFwzhh.js.map